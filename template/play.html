<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{.title}}</title>
	<link href="assets/image/favicon/video/favicon.ico" rel="shortcut icon">
	<link rel="stylesheet" href="assets/bootstrap-5.3.0/assets/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://unpkg.byted-static.com/xgplayer/3.0.10/dist/index.min.css">
	<!-- <link type="text/css" rel="stylesheet" href="assets/app/css/play.css" /> -->
	<style type="text/css">
        html,
        body {
            width: 100%;
            height: 100%;
            margin: auto;
            overflow: hidden;
        }

        body {
            display: flex;
        }

        #videoPlayer {
            flex: auto;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
        }
    </style>
	<script type="text/javascript">
        document.addEventListener('ready', () => {
            const resizeObserver = new ResizeObserver(() => {
                document.getElementById('videoPlayer').style.height = document.body.clientHeight + 'px'
            })
            resizeObserver.observe(document.body)
        })
    </script>
</head>
<body>

<div class="container">
	<div id="videoPlayer"></div>
</div>

<script src="assets/app/js/jquery-3.5.1.min.js"></script>
<script src="assets/bootstrap-5.3.0/assets/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://unpkg.byted-static.com/xgplayer/3.0.10/dist/index.min.js" charset="utf-8"></script>
<script type="text/javascript">
	let storage = Object
	let videoUrl = '{{ .videoUrl }}'
	if(!window.localStorage){
		alert('浏览器不支持localStorage')
	}else{
		storage = window.localStorage;
	}

	let player = new Player({
		id: 'videoPlayer',
		autoplay: true,
		volume: 0.6,
		loop: true,
		url: videoUrl,
		// poster: "https://lf3-static.bytednsdoc.com/obj/eden-cn/nupenuvpxnuvo/xgplayer_doc/poster.jpg",
		playsinline: true,
		lang: 'zh-cn',
		startTime: storage.getItem(videoUrl),
		// fluid: true,
		// fitVideoSize: 'auto',
		// seekedStatus: 'auto',
		miniprogress: true,
		screenShot: true, //显示截图按钮
  		videoAttributes: {
    		crossOrigin: 'anonymous'
  		},
		rotate: true,//是否使用旋转插件
		pip: true, //显示切换按钮
		mini: true, //开启小窗插件
		playbackRate: [0.5, 0.75, 1, 1.5, 2, 3, 4],
		defaultPlaybackRate: 1.0,
		height: '100%',
		width: '100%',
	});
	// player.emit('resourceReady', [{ name: '超清', definition: '1080p', url: 'https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-720p.mp4' }, { name: '高清', definition: '720p', url: 'https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-480p.mp4' }, { name: '标清', definition: '480p', url: 'https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/xgplayer_doc_video/mp4/xgplayer-demo-360p.mp4' }]);
	const Events = window.Player.Events
	player.on(Events.TIME_UPDATE, (data) => {
		storage.setItem(videoUrl,data.currentTime)
	})
</script>

</body>
</html>
