<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.108.0">
	<title>{{.title}}</title>
	<link href="assets/image/favicon/video/favicon.ico" rel="shortcut icon">
	<link href="assets/app/css/bootstrap-5.3.0.min.css" rel="stylesheet">
	<link href="assets/app/css/bootstrap-icons-1.11.3.min.css" rel="stylesheet">
	<style>
		.card {
			border: none;
			/* 这里的0.5 是透明度值，可以根据需要调整 */
			background-color: rgba(255, 255, 255, 0.1);
		}
	</style>
</head>

<body>
	<main>
		<div class="container">
			{{ template "header" }}
        </div>
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-9">
					<div class="card">
						<div id="videoContainer" class="card-img-top"></div>
						<div class="card-body">
							<h5 class="card-title">标题</h5>
							<p class="card-text">{{ .videoActress }}</p>
							<p class="card-text d-flex justify-content-start">
								<span class="d-flex align-items-end statistics_collect">
									<i class="bi {{if .IsCollect}}bi-heart-fill{{else}}bi-heart{{end}}" style="font-size: 1.5rem;">{{ .Collect }}</i>
									<i class="me-3"></i>
								</span>
								<span class="d-flex align-items-end statistics_browse">
									<i class="bi bi-eye-fill" style="font-size: 1.5rem;">{{ .Browse }}</i>
									<i class="me-3"></i>
								</span>
								<span class="d-flex align-items-end">
									<i class="bi bi-clock-fill" style="font-size: 1.5rem;">{{ .Duration }}</i>
								</span>
							</p>
							<p class="card-text d-flex justify-content-start">
								<span class="fs-3"><small class="text-muted">切换播放器：</small></span>
								<img onclick="loadPlayer('xgplayer')" src="assets/image/logo/xgplayer.jpg" alt="xgplayer" width="40" height="40" class="rounded-circle me-2">
								<img onclick="loadPlayer('ckplayer')" src="assets/image/logo/ckplayer.png" alt="ckplayer" width="40" height="40" class="rounded-circle me-2">
							</p>
						</div>	
					</div>

					<!-- 评论 -->
					<div class="card">
						<div class="card-body">
							<div class="row">
								<div class="col-auto">
									<img src="https://via.placeholder.com/50" class="rounded-circle">
								</div>
								<div class="col">
									<form>
										<div class="mb-3">
											<input type="hidden" name="video_id" value="{{ .videoID }}">
											<textarea name="content" class="form-control comment-reply" rows="3" placeholder="发一条友善的评论吧～"></textarea>
										</div>				
										<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发布评论</button>
									</form>
								</div>
							</div>
						</div>
						<span class="border border-light-subtle"></span>

						<div class="card-body" id="comment-list">
							<div class="row mt-4">
								<div class="col-auto">
									<!-- User Avatar -->
									<img src="https://via.placeholder.com/50" width="50" height="50" class="rounded-circle">
								</div>
								<div class="col">
									<!-- User Name and Location -->
									<div class="row">
										<h5 class="col">用户名 <small class="text-muted">位置</small></h5>
										<!-- Comment Time -->
										<small class="col-auto text-muted">3小时前</small>
									</div>
									<!-- Comment Text -->
									<p class="my-2">这是评论内容。用户可以在这里发表自己的看法和意见。</p>
									<!-- Like, Dislike, Reply, Report Buttons -->
									<div>
										<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">100</i>赞</button>
										<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">10</i>踩</button>
										<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
										<button class="btn btn-sm btn-outline-warning">举报</button>
									</div>
									<!-- 回复表单（默认隐藏） -->
									<div class="mt-3 reply-form d-none">
										<form>
											<div class="mb-3">
												<textarea class="form-control comment-reply" rows="3" placeholder="回复用户名："></textarea>
											</div>
											<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
										</form>
									</div>

									<!-- Reply Area -->
									<div class="ms-3 mt-3 collapse">
										<div class="row mt-3">
											<div class="col-auto">
												<!-- Reply User Avatar -->
												<img src="https://via.placeholder.com/50" class="rounded-circle">
											</div>
											<div class="col">
												<!-- Reply User Name and Location -->
												<div class="row">
													<h5 class="col">另一用户 <small class="text-muted">位置</small></h5>
													<!-- Reply Time -->
													<small class="col-auto text-muted">2小时前</small>
												</div>
												<!-- Reply Text -->
												<p class="my-2">这是评论的回复内容。</p>
												<!-- Like, Dislike, Reply, Report Buttons -->
												<div>
													<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">100</i>赞</button>
													<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">10</i>踩</button>
													<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
													<button class="btn btn-sm btn-outline-warning">举报</button>
												</div>
												<!-- 回复表单（默认隐藏） -->
												<div class="mt-3 reply-form d-none">
													<form>
														<div class="mb-3">
															<textarea class="form-control comment-reply" rows="3" placeholder="回复另一用户："></textarea>
														</div>
														<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
													</form>
												</div>
											</div>
										</div>

									</div>
									<!-- Show/Hide Reply Button -->
									<button class="btn btn-sm btn-light" data="展开 1 条回复" onclick="toggleReplyCollapse(this)">展开 1 条回复 <i class="bi bi-chevron-down"></i></button>
								</div>
							</div>
						</div>

					</div>

				</div>
			</div>
		</div>

	</main>

	{{ template "footer" }}

	<script src="assets/app/js/bootstrap-5.3.0.bundle.min.js"></script>
	<script>
		const commentReplyElementList = document.querySelectorAll('.comment-reply')
		const commentReplyList = [...commentReplyElementList].map(commentReply)
		function commentReply(value, index, array) {
			let replyButton = value.parentNode.nextElementSibling
			value.addEventListener('input', function () {
				if(this.value.length === 0) {
					replyButton.disabled = true;
				} else {
					replyButton.disabled = false;
				}
			})
		}

        function toggleReplyForm(button) {
			if (button.textContent == '回复') {
				button.textContent = '取消回复'
			} else {
				button.textContent = '回复'
			}
            const replyForm = button.parentNode.nextElementSibling
            replyForm.classList.toggle('d-none');
        }

		const collapseElementList = document.querySelectorAll('.collapse')
		const collapseList = [...collapseElementList].map(toggleReply)
		function toggleReply(value, index, array) {
			if (index > 0) {
				let replyArea = value;
				let toggleReply = value.nextElementSibling;
				console.log(toggleReply.getAttribute('data'))
				
				replyArea.addEventListener('show.bs.collapse', function () {
					toggleReply.innerHTML = '收起回复'+` <i class="bi bi-chevron-up"></i>`;
				})
				replyArea.addEventListener('hide.bs.collapse', function () {
					toggleReply.innerHTML = toggleReply.getAttribute('data')+` <i class="bi bi-chevron-down"></i>`;
				})
			}
		}

		function toggleReplyCollapse(button) {
			const collapseEl = button.previousElementSibling
			new bootstrap.Collapse(collapseEl)
		}        
    </script>
	<script src="assets/app/js/jquery-3.5.1.min.js"></script>
	<script>
		let storage = Object;
		if (!window.localStorage) {
			alert('浏览器不支持localStorage')
		} else {
			storage = window.localStorage;
		}

		var bg = storage.getItem("bg");
		if (bg == "dark") {
			setBgDark()
		} else if (bg == "light") {
			setBgLight()
		} else {
			setBgLight()
		}

		var cookieString = document.cookie;
		if (cookieString != "") {
			document.getElementById("login").style.display = "none";
		} else {
			document.getElementById("settings").style.display = "none";
		}

		function login() {
			window.location.href = "/login";
		}
		function logout() {
			$.get("/logout", function (data, status) {
				if (status = "success") {
					window.location.reload();
				}
			});
		}

		$('#setbg').click(function(){
			var src = $("#setbg > img").attr("src")
			if (src == "assets/image/icon/sun-fill.svg") {
				setBgDark();
			} else {
				setBgLight();
			}
		});

		function setBgDark() {
			console.log("setBgDark");
			$("#setbg > img").attr("src", "assets/image/icon/moon-stars-fill.svg");
			$("body").removeClass("bg-light").addClass("bg-dark text-secondary");
			$(".card").removeClass("text-light").addClass("text-secondary");
			$("footer").removeClass("bg-light").addClass("text-secondary");
			
			storage.setItem("bg", "dark");
		}

		function setBgLight() {
			$("#setbg > img").attr("src", "assets/image/icon/sun-fill.svg");
			$("body").removeClass("bg-dark text-secondary").addClass("bg-light");
			$(".card").removeClass("text-secondary").addClass("bg-light");
			$("footer").removeClass("text-secondary").addClass("bg-light");

			storage.setItem("bg", "light");
		}
	</script>
	<script>
		let videoUrl = '{{ .videoUrl }}';
		// videoUrl = 'assets/video/lc.mp4';
		console.log('{{ .videoTitle }}')

		loadPlayer('');

		function loadPlayer(playerType) {
			remove();

			var player = storage.getItem("player");
			if (playerType == '' && player == '') {
				playerType = 'xgplayer';
			} else if (playerType == '' && player != '') {
				playerType = player;
			}
			
			var div = document.createElement("div");
			div.setAttribute("id", "videoPlayer");
			var classList = ["img-fluid"];
			if (playerType == "ckplayer") {
				classList.push("ratio", "ratio-16x9");
			}
			div.classList.add(...classList);
			document.getElementById("videoContainer").appendChild(div);

			if (playerType == "ckplayer") {
				loadCSS("assets/player/ckplayer-x3/css/ckplayer.css");
				loadJavaScript("assets/player/ckplayer-x3/js/ckplayer.js", loadCkplayer);
			} else {
				loadCSS("assets/player/xgplayer-3.0.10/index.min.css");
				loadJavaScript("assets/player/xgplayer-3.0.10/index.min.js", loadXgplayer);
			}
			storage.setItem("player", playerType);
		}

		function remove() {
			var videoPlayer = document.getElementById("videoPlayer");
			if (videoPlayer) {
				document.getElementById("videoContainer").removeChild(videoPlayer);
			}
			var ckplayerMenus = document.getElementsByClassName("ckplayer-ckplayer-menu");
			if (ckplayerMenus.length > 0) {
				for (let index = 0; index < ckplayerMenus.length; index++) {
					const element = ckplayerMenus[index];
					element.remove();
				}
			}

			var links = document.getElementsByTagName("link");
			if (links.length > 0) {
				for (let index = 0; index < links.length; index++) {
					const element = links[index];
					var video = element.getAttribute("video");
					if (video == "css") {
						element.remove();
					}
				}
			}
			var scripts = document.getElementsByTagName("script");
			if (scripts.length > 0) {
				for (let index = 0; index < scripts.length; index++) {
					const element = scripts[index];
					var video = element.getAttribute("video");
					if (video == "js") {
						element.remove();
					}
				}
			}
		}

		// 动态加载CSS文件
		function loadCSS(href) {
			var link = document.createElement("link");
			link.rel = "stylesheet";
			link.type = "text/css";
			link.href = href;
			link.setAttribute("video", "css");
			document.getElementsByTagName("head")[0].appendChild(link);
		}

		// 动态加载JavaScript文件
		function loadJavaScript(url, callback) {
			var script = document.createElement("script");
			script.type = "text/javascript";
			script.src = url;
			script.setAttribute("video", "js");
			document.getElementsByTagName("head")[0].appendChild(script);
			script.onload = function () {
				callback();
			};
		}

		function loadXgplayer() {
			if (typeof Player !== "undefined") {
				let player = new Player({
					id: 'videoPlayer',
					autoplay: true, // 是否自动播放
					volume: 0.6, // 默认音量, 取值范围0 ~ 1
					loop: true, // 是否循环播放
					url: videoUrl,
					lang: 'zh-cn', // 播放器初始显示语言
					startTime: storage.getItem(videoUrl), // 初始起播时间，仅点播
					fitVideoSize: 'auto', // 初始起播时间，仅点播
					seekedStatus: 'auto', // seek操作结束之后播放器的状态，如果取值为auto，则维持原播放状态, 默认是seek之后直接播放
					pip: true, // 是否使用画中画插件
					rotate: true,// 是否使用旋转插件
					screenShot: true, //显示截图按钮
					videoAttributes: {
						crossOrigin: 'anonymous'
					},
					playbackRate: [0.5, 0.75, 1, 1.5, 2, 3, 4],
					defaultPlaybackRate: 1.0,
					width: 'auto',
					hight: 'auto',
					// poster: '',
				});
				const Events = window.Player.Events;
				player.on(Events.TIME_UPDATE, (data) => {
					storage.setItem(videoUrl, data.currentTime);
				});
			}
		}

		function loadCkplayer() {
			var videoObject = {
				container: '#videoPlayer', // 视频容器
				volume: 0.6, // 默认音量，范围0-1
				autoplay: true, // 是否自动播放
				loop: true, // 是否需要循环播放
				seek: 'cookie', // 指定跳转到cookie记录的时间，使用该属性必需配置属性cookie
				cookie: 'video', // cookie名称,请在同一域中保持唯一
				video: videoUrl, // 视频地址
				webFull: true, // 是否启用页面全屏按钮，默认不启用
				screenshot: true, // 截图功能是否开启
				crossOrigin:'Anonymous',//发送跨域字符
				title: '{{ .videoActress }}',// 视频标题
				playbackrateOpen: true, // 是否开启控制栏倍速选项
				playbackrate: 1, // 默认倍速
				playbackrateList: [0.75, 1, 1.25, 1.5, 2, 4], // 倍速配置值 
				controls: true,//是否显示自带控制栏
				rightBar: true,//是否开启右边控制栏
				menu: [], // 右键菜单
				// poster: 'assets/ckplayer-x3/video/poster.png',// 封面图片
				// logo: 'assets/image/favicon/video/favicon-32x32.png',
			};
			var player = new ckplayer(videoObject)//调用播放器并赋值给变量player
			player.screenshot()//截图并返回图片地址
		}
	</script>
	<script src="assets/app/js/axios.min.js"></script>
    <script>
		console.log('{{ .IsCollect }}')
		var videoID = '{{ .videoID }}' 
        // 统计收藏量
        $('.statistics_collect').click(function(){
            var children = $(this).children()  
            var collect = children[0].classList   
            var count = children[0].textContent  
			var setCollect = 0
            if (collect[1] == 'bi-heart') {
                collect.remove('bi-heart')
                collect.add('bi-heart-fill')
                count++
                children[0].textContent = count
				setCollect = 1
            } else {
                collect.add('bi-heart')
                collect.remove('bi-heart-fill')
                count--
                children[0].textContent = count
				setCollect = -1
            } 

            const formData = {};
    		formData['video_id'] = parseInt(videoID)
			formData['collect'] = setCollect
            
            axios.post('/collect',formData,{headers: {'content-type': 'application/json'}})
            .then(function (response) {
                console.log(response);
                if (response) {
                    console.log(response.data);
                }
            })
            .catch(function (error) {
				if (error.response) {
					// 请求成功发出且服务器也响应了状态码，但状态代码超出了 2xx 的范围
					console.log(error.response.data);
					console.log(error.response.status);
					console.log(error.response.headers);
					
				} else if (error.request) {
					// 请求已经成功发起，但没有收到响应
					// `error.request` 在浏览器中是 XMLHttpRequest 的实例，
					// 而在node.js中是 http.ClientRequest 的实例
					console.log(error.request);
				} else {
					// 发送请求时出了点问题
					console.log('Error', error.message);
				}
				console.log(error.config);
				console.log(error); 
            });   
        })

        // 统计浏览量
		var children = $('.statistics_browse').children() 
		var browse = children[0].classList   
		var count = children[0].textContent  
		if (browse[1] == 'bi-eye-fill') {
			count++
			children[0].textContent = count
		}
		
		axios.get('/browse', {params: {video_id: parseInt(videoID)}},{headers: {'content-type': 'application/x-www-form-urlencoded'}})
		.then(function (response) {
			console.log(response);
			if (response) {
				console.log(response.data);
			}
		})
		.catch(function (error) {
			if (error.response) {
				// 请求成功发出且服务器也响应了状态码，但状态代码超出了 2xx 的范围
				console.log(error.response.data);
				console.log(error.response.status);
				console.log(error.response.headers);
				
			} else if (error.request) {
				// 请求已经成功发起，但没有收到响应
				// `error.request` 在浏览器中是 XMLHttpRequest 的实例，
				// 而在node.js中是 http.ClientRequest 的实例
				console.log(error.request);
			} else {
				// 发送请求时出了点问题
				console.log('Error', error.message);
			}
			console.log(error.config);
			console.log(error); 
		}); 

		function comment(button) {
			// 处理表单数据的代码
			const form = button.parentNode;	
			const formData = {};
			for (let element of form.elements) {
				console.log(element.tagName)
				if (element.tagName !== "BUTTON" && element.type !== "SUBMIT") {
					if (element.tagName === "INPUT") {
						formData[element.name] = parseInt(element.value);
					} else {
						formData[element.name] = element.value;
					}
				}t
			}
			console.log(formData)
			
			axios.post('/comment',formData,{headers: {'content-type': 'application/json'}})
			.then(function (response) {
				console.log(response);
				if (response) {
					var html = `<div class="row mt-4">
						<div class="col-auto">
							<!-- User Avatar -->
							<img src="https://via.placeholder.com/50" class="rounded-circle">
						</div>
						<div class="col">
							<!-- User Name and Location -->
							<div class="row">
								<h5 class="col">用户名 <small class="text-muted">位置</small></h5>
								<!-- Comment Time -->
								<small class="col-auto text-muted">3小时前</small>
							</div>
							<!-- Comment Text -->
							<p class="my-2">`+formData.content+`</p>
							<!-- Like, Dislike, Reply, Report Buttons -->
							<div>
								<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">100</i>赞</button>
								<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">10</i>踩</button>
								<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
								<button class="btn btn-sm btn-outline-warning">举报</button>
							</div>
							<!-- 回复表单（默认隐藏） -->
							<div class="mt-3 reply-form d-none">
								<form>
									<div class="mb-3">
										<textarea class="form-control comment-reply" rows="3" placeholder="回复用户名："></textarea>
									</div>
									<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
								</form>
							</div>

							<!-- Reply Area -->
							<div class="ms-3 mt-3 collapse">
								<div class="row mt-3">
									<div class="col-auto">
										<!-- Reply User Avatar -->
										<img src="https://via.placeholder.com/50" class="rounded-circle">
									</div>
									<div class="col">
										<!-- Reply User Name and Location -->
										<div class="row">
											<h5 class="col">另一用户 <small class="text-muted">位置</small></h5>
											<!-- Reply Time -->
											<small class="col-auto text-muted">2小时前</small>
										</div>
										<!-- Reply Text -->
										<p class="my-2">这是评论的回复内容。</p>
										<!-- Like, Dislike, Reply, Report Buttons -->
										<div>
											<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">100</i>赞</button>
											<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">10</i>踩</button>
											<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
											<button class="btn btn-sm btn-outline-warning">举报</button>
										</div>
										<!-- 回复表单（默认隐藏） -->
										<div class="mt-3 reply-form d-none">
											<form>
												<div class="mb-3">
													<textarea class="form-control comment-reply" rows="3" placeholder="回复另一用户："></textarea>
												</div>
												<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
											</form>
										</div>
									</div>
								</div>

							</div>
							<!-- Show/Hide Reply Button -->
							<button class="btn btn-sm btn-light" data="展开 1 条回复" onclick="toggleReplyCollapse(this)">展开 1 条回复 <i class="bi bi-chevron-down"></i></button>
						</div>
					</div>`;
				}
			})
			.catch(function (error) {
			if (error.response) {
				// 请求成功发出且服务器也响应了状态码，但状态代码超出了 2xx 的范围
				console.log(error.response.data);
				console.log(error.response.status);
				console.log(error.response.headers);
			} else if (error.request) {
				// 请求已经成功发起，但没有收到响应
				// `error.request` 在浏览器中是 XMLHttpRequest 的实例，
				// 而在node.js中是 http.ClientRequest 的实例
				console.log(error.request);
			} else {
				// 发送请求时出了点问题
				console.log('Error', error.message);
			}
			console.log(error.config);
			console.log(error); 
			});
		}
		
		axios.get('/commentList', {params: {video_id: parseInt(videoID)}},{headers: {'content-type': 'application/x-www-form-urlencoded'}})
		.then(function (response) {
			console.log(response);
			if (response) {
				console.log(response.data.data);
				let list = response.data.data;
				var html = '';
				list.forEach(element => {
					html += 
					`<div class="row mt-4">
						<div class="col-auto">
							<!-- User Avatar -->
							<img src="assets/image/avatar/Logo.png" width="50" height="50" class="rounded-circle">
						</div>
						<div class="col">
							<!-- User Name and Location -->
							<div class="row">
								<h5 class="col">`+element.Nickname+` <small class="text-muted">北京</small></h5>
								<!-- Comment Time -->
								<small class="col-auto text-muted">3小时前</small>
							</div>
							<!-- Comment Text -->
							<p class="my-2">`+element.Content+`</p>
							<!-- Like, Dislike, Reply, Report Buttons -->
							<div>
								<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">`+element.Support+`</i>赞</button>
								<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">`+element.Oppose+`</i>踩</button>
								<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
								<button class="btn btn-sm btn-outline-warning">举报</button>
							</div>
							<!-- 回复表单（默认隐藏） -->
							<div class="mt-3 reply-form d-none">
								<form>
									<div class="mb-3">
										<textarea class="form-control comment-reply" rows="3" placeholder="回复`+element.Nickname+`："></textarea>
									</div>
									<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
								</form>
							</div>

							<!-- Reply Area -->
							<div class="ms-3 mt-3 collapse">
								<div class="row mt-3">
									<div class="col-auto">
										<!-- Reply User Avatar -->
										<img src="https://via.placeholder.com/50" class="rounded-circle">
									</div>
									<div class="col">
										<!-- Reply User Name and Location -->
										<div class="row">
											<h5 class="col">另一用户 <small class="text-muted">位置</small></h5>
											<!-- Reply Time -->
											<small class="col-auto text-muted">2小时前</small>
										</div>
										<!-- Reply Text -->
										<p class="my-2">这是评论的回复内容。</p>
										<!-- Like, Dislike, Reply, Report Buttons -->
										<div>
											<button class="btn btn-sm btn-outline-success"><i class="bi bi-hand-thumbs-up">100</i>赞</button>
											<button class="btn btn-sm btn-outline-danger"><i class="bi bi-hand-thumbs-down">10</i>踩</button>
											<button class="btn btn-sm btn-outline-primary" onclick="toggleReplyForm(this)">回复</button>
											<button class="btn btn-sm btn-outline-warning">举报</button>
										</div>
										<!-- 回复表单（默认隐藏） -->
										<div class="mt-3 reply-form d-none">
											<form>
												<div class="mb-3">
													<textarea class="form-control comment-reply" rows="3" placeholder="回复另一用户："></textarea>
												</div>
												<button type="button" class="btn btn-primary" onclick="comment(this)" disabled>发送回复</button>
											</form>
										</div>
									</div>
								</div>

							</div>
							<!-- Show/Hide Reply Button -->
							<button class="btn btn-sm btn-light" data="展开 1 条回复" onclick="toggleReplyCollapse(this)">展开 1 条回复 <i class="bi bi-chevron-down"></i></button>
						</div>
					</div>`;
				});	

				document.getElementById('comment-list').innerHTML = html

				const commentReplyElementList = document.querySelectorAll('.comment-reply')
				const commentReplyList = [...commentReplyElementList].map(commentReply)

				const collapseElementList = document.querySelectorAll('.collapse')
				const collapseList = [...collapseElementList].map(toggleReply)
			}
		})
		.catch(function (error) {
			if (error.response) {
				// 请求成功发出且服务器也响应了状态码，但状态代码超出了 2xx 的范围
				console.log(error.response.data);
				console.log(error.response.status);
				console.log(error.response.headers);
				
			} else if (error.request) {
				// 请求已经成功发起，但没有收到响应
				// `error.request` 在浏览器中是 XMLHttpRequest 的实例，
				// 而在node.js中是 http.ClientRequest 的实例
				console.log(error.request);
			} else {
				// 发送请求时出了点问题
				console.log('Error', error.message);
			}
			console.log(error.config);
			console.log(error); 
		}); 
    </script>
</body>

</html>