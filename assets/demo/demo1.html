<!DOCTYPE html>
<html>

<head>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <form>
    <div class="mb-3">
      <textarea name="content" class="form-control is-invalid" rows="3" placeholder="发一条友善的评论吧～" required></textarea>
      <div class="invalid-feedback">
        请输入评论内容。
      </div>
    </div>
    <input type="hidden" name="video_id" value="{{ .videoID }}">
    <button type="submit" class="btn btn-primary">发布评论</button>
  </form>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/app/js/jquery-3.5.1.min.js"></script>
  <script>
		let storage = Object;
		if (!window.localStorage) {
			alert('浏览器不支持localStorage')
		} else {
			storage = window.localStorage;
		}

		var bg = storage.getItem("bg");
		if (bg == "dark") {
			setBgDark()
		} else if (bg == "light") {
			setBgLight()
		} else {
			setBgLight()
		}

    var cookieString = document.cookie;
    if (cookieString != "") {
        document.getElementById("login").style.display = "none";
    } else {
        document.getElementById("settings").style.display = "none";
    }

    function login() {
        window.location.href = "/login";
    }
    function logout() {
        $.get("/logout", function (data, status) {
            if (status = "success") {
                window.location.reload();
            }
        });
    }
    
    $('#setbg').click(function(){
      var src = $("#setbg > img").attr("src")
      if (src == "assets/image/icon/sun-fill.svg") {
        setBgDark();
      } else {
        setBgLight();
      }
    });

    function setBgDark() {
			$("#setbg > img").attr("src", "assets/image/icon/moon-stars-fill.svg");
			$("body").removeClass("bg-light").addClass("bg-dark text-secondary");
			$(".card").removeClass("text-light").addClass("text-secondary");
			$("footer").removeClass("bg-light").addClass("text-secondary");
			
			storage.setItem("bg", "dark");
		}

		function setBgLight() {
			$("#setbg > img").attr("src", "assets/image/icon/sun-fill.svg");
			$("body").removeClass("bg-dark text-secondary").addClass("bg-light");
			$(".card").removeClass("text-secondary").addClass("bg-light");
			$("footer").removeClass("text-secondary").addClass("bg-light");

			storage.setItem("bg", "light");
		}
	</script>
</body>

</html>